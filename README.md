# RustScan for OpenWrt

RustScançš„OpenWrtç§»æ¤ç‰ˆæœ¬ - ç°ä»£åŒ–çš„ç«¯å£æ‰«æå™¨

## é¡¹ç›®æ¦‚è¿°

RustScanæ˜¯ä¸€ä¸ªç”¨Rustç¼–å†™çš„ç°ä»£åŒ–ç«¯å£æ‰«æå™¨ï¼Œæ¯”ä¼ ç»Ÿçš„nmapæ›´å¿«æ›´é«˜æ•ˆã€‚æœ¬åŒ…æ˜¯é’ˆå¯¹OpenWrtåµŒå…¥å¼ç³»ç»Ÿçš„ä¼˜åŒ–ç§»æ¤ç‰ˆæœ¬ã€‚

## ç‰¹æ€§

- ğŸš€ **é«˜é€Ÿæ‰«æ**: æ¯”nmapå¿«å¾—å¤šçš„ç«¯å£æ‰«æé€Ÿåº¦
- ğŸ§  **è‡ªé€‚åº”å­¦ä¹ **: ä½¿ç”¨è¶Šå¤šï¼Œæ€§èƒ½è¶Šå¥½
- ğŸ“œ **è„šæœ¬æ”¯æŒ**: æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è„šæœ¬
- ğŸ”§ **åµŒå…¥å¼ä¼˜åŒ–**: é’ˆå¯¹OpenWrtç³»ç»Ÿä¼˜åŒ–çš„èµ„æºä½¿ç”¨
- ğŸŒ **è·¨å¹³å°**: æ”¯æŒå¤šç§æ¶æ„ (aarch64, arm, mips/mipsel, mips64/mips64el, x86_64, i386, riscv64, powerpc64)
- âš¡ **ä½èµ„æºå ç”¨**: é€‚åˆè·¯ç”±å™¨ç­‰åµŒå…¥å¼è®¾å¤‡

## å®‰è£…

### ç¼–è¯‘å®‰è£…
```bash
# åœ¨OpenWrtæ„å»ºç¯å¢ƒä¸­
# æ³¨æ„ï¼šè¯·æ ¹æ®ä½ çš„å®é™…åŒ…è·¯å¾„è°ƒæ•´ä»¥ä¸‹å‘½ä»¤
make package/path/to/rustscan/compile V=s

# æˆ–ä½¿ç”¨å¹¶è¡Œç¼–è¯‘
make package/path/to/rustscan/compile -j$(nproc)

# å¸¸è§è·¯å¾„ç¤ºä¾‹ï¼š
# make package/feeds/packages/rustscan/compile    # å¦‚æœåœ¨feedsä¸­
# make package/custom/rustscan/compile            # å¦‚æœåœ¨è‡ªå®šä¹‰ç›®å½•
# make package/rustscan/compile                   # å¦‚æœç›´æ¥åœ¨packageç›®å½•
```

#### æŸ¥æ‰¾åŒ…è·¯å¾„
```bash
# æŸ¥æ‰¾rustscanåŒ…çš„ä½ç½®
find package/ -name "rustscan" -type d

# æˆ–æŸ¥æ‰¾åŒ…å«â€œrustscanâ€çš„Makefile
find package/ -name "Makefile" -exec grep -l "PKG_NAME.*rustscan" {} \;
```

### é…ç½®
```bash
# å¯ç”¨æœåŠ¡
uci set rustscan.config.enabled='1'
uci commit rustscan
/etc/init.d/rustscan start
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬æ‰«æ
```bash
# æ‰«æå•ä¸ªä¸»æœºçš„å¸¸ç”¨ç«¯å£
rustscan -a 192.168.1.1

# æ‰«æIPæ®µ
rustscan -a 192.168.1.0/24

# æ‰«æç‰¹å®šç«¯å£
rustscan -a 192.168.1.1 -p 22,80,443,8080
```

### é«˜çº§é€‰é¡¹
```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶
rustscan --config-path /etc/rustscan/rustscan.toml -a 192.168.1.1

# åµŒå…¥å¼æ¨¡å¼ï¼ˆä½èµ„æºä½¿ç”¨ï¼‰
rustscan --embedded -a 192.168.1.1

# OpenWrtä¼˜åŒ–æ¨¡å¼
rustscan --openwrt -a 192.168.1.1

# æ‰¹é‡æ‰«æï¼ˆè°ƒæ•´æ‰¹æ¬¡å¤§å°ï¼‰
rustscan -a 192.168.1.1 -b 1000

# è®¾ç½®è¶…æ—¶æ—¶é—´
rustscan -a 192.168.1.1 -t 2000
```

### æ‰«æé…ç½®æ–‡ä»¶

ç³»ç»Ÿæä¾›äº†ä¸‰ç§é¢„è®¾é…ç½®ï¼š

1. **å¿«é€Ÿæ‰«æ** (fast): é«˜é€Ÿæ‰«æå¸¸ç”¨ç«¯å£
2. **å…¨é¢æ‰«æ** (thorough): æ‰«ææ›´å¤šç«¯å£ï¼Œæ›´å¤šé‡è¯•
3. **éšè”½æ‰«æ** (stealth): æ…¢é€Ÿæ‰«æï¼Œé¿å…è¢«æ£€æµ‹

## é…ç½®æ–‡ä»¶

### UCIé…ç½® (`/etc/config/rustscan`)
```
config rustscan 'config'
    option enabled '1'
    option batch_size '2000'
    option timeout '1500'
    option tries '1'
    option ulimit '5000'
    option top_ports '1000'
```

### TOMLé…ç½® (`/etc/rustscan/rustscan.toml`)
è¯¦ç»†çš„é…ç½®é€‰é¡¹ï¼ŒåŒ…æ‹¬æ€§èƒ½è°ƒä¼˜å’Œç½‘ç»œè®¾ç½®ã€‚

## æ€§èƒ½è°ƒä¼˜

### åµŒå…¥å¼ç³»ç»Ÿä¼˜åŒ–
- `batch_size`: å»ºè®®è®¾ç½®ä¸º1000-2000ï¼ˆé»˜è®¤4500å¯èƒ½è¿‡é«˜ï¼‰
- `timeout`: æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´ï¼Œå»ºè®®1500-3000ms
- `ulimit`: æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼Œå»ºè®®3000-5000
- `max_threads`: çº¿ç¨‹æ•°é™åˆ¶ï¼Œå»ºè®®2-4ä¸ª

### å†…å­˜ä½¿ç”¨
- å…¸å‹å†…å­˜å ç”¨: 10-30MB
- å³°å€¼å†…å­˜å ç”¨: 50-100MBï¼ˆå–å†³äºæ‰«æè§„æ¨¡ï¼‰

## æ¶æ„æ”¯æŒ

- âœ… aarch64 (ARM64)
- âœ… mips (MIPS32)  
- âœ… arm (ARM32)
- âœ… x86_64

## ä¾èµ–

- Rust 1.70+ï¼ˆç¼–è¯‘æ—¶ï¼‰
- musl libcï¼ˆè¿è¡Œæ—¶ï¼‰
- æœ€å°å­˜å‚¨ç©ºé—´: ~5MB
- æœ€å°å†…å­˜: ~16MB

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é”™è¯¯**
   ```bash
   # ç¡®ä¿æœ‰ç½‘ç»œæ‰«ææƒé™
   rustscan --accessible -a 192.168.1.1
   ```

2. **æ–‡ä»¶æè¿°ç¬¦ä¸è¶³**
   ```bash
   # è°ƒæ•´ulimitè®¾ç½®
   uci set rustscan.config.ulimit='3000'
   uci commit rustscan
   ```

3. **å†…å­˜ä¸è¶³**
   ```bash
   # ä½¿ç”¨åµŒå…¥å¼æ¨¡å¼
   rustscan --embedded --batch-size 500 -a 192.168.1.1
   ```

### è°ƒè¯•æ¨¡å¼
```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
rustscan -a 192.168.1.1 --verbose

# æ£€æŸ¥é…ç½®
rustscan --help
```

## å¼€å‘ä¿¡æ¯

- **ä¸Šæ¸¸é¡¹ç›®**: https://github.com/bee-san/RustScan
- **ç‰ˆæœ¬**: 2.4.1
- **è®¸å¯è¯**: GPL-3.0
- **ç»´æŠ¤è€…**: ntbowen <https://github.com/ntbowen>

## æ›´æ–°æ—¥å¿—

### v2.4.1-openwrt-1
- æ›´æ–°åˆ°RustScan 2.4.1ï¼ˆä½¿ç”¨masteråˆ†æ”¯è·å¾—çœŸæ­£çš„2.4.1ç‰ˆæœ¬ï¼‰
- ä¿®å¤ç‰ˆæœ¬å·ä¸åŒ¹é…é—®é¢˜ï¼ˆtagä¸­Cargo.tomlç‰ˆæœ¬å·æœªæ›´æ–°ï¼‰
- ä¼˜åŒ–é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºOpenWrtæ ‡å‡†è·¯å¾„ `/etc/rustscan/rustscan.toml`
- ç®€åŒ–åŒ…ç»“æ„ï¼Œç§»é™¤å¼€å‘é˜¶æ®µçš„æµ‹è¯•è„šæœ¬
- æ›´æ–°ä½œè€…ä¿¡æ¯
- åµŒå…¥å¼ç³»ç»Ÿä¼˜åŒ–
- UCIé…ç½®é›†æˆ
- å¤šæ¶æ„æ”¯æŒ

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’Œæ”¹è¿›å»ºè®®åˆ°ä¸Šæ¸¸é¡¹ç›®æˆ–æœ¬ç§»æ¤ç‰ˆæœ¬ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ªGPL-3.0è®¸å¯è¯ï¼Œä¸ä¸Šæ¸¸é¡¹ç›®ä¿æŒä¸€è‡´ã€‚
